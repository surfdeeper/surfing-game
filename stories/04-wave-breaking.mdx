# 4. Wave Breaking

A wave breaks when its height exceeds ~0.78 times the water depth (H > 0.78d).
At this point, particle orbital velocity exceeds wave velocity, causing
the crest to overtake and fall forward.

import { ProgressionPlayer, ProgressionStrip } from './components/ProgressionPlayer';
import {
  PROGRESSION_SPILLING,
  PROGRESSION_PLUNGING,
  PROGRESSION_SURGING,
  PROGRESSION_ENERGY_TO_FOAM,
  WAVE_BREAKING_STRIP_CRITERION,
  WAVE_BREAKING_STRIP_TYPES,
  WAVE_BREAKING_STRIP_ENERGY,
} from '../src/render/waveBreakingProgressions';

<section id="breaking-criterion">

## Breaking Criterion

The McCowan criterion defines when a wave becomes unstable:

```
H/d > 0.78
```

Where:
- `H` = wave height
- `d` = water depth

Below this ratio, waves are stable. Above it, breaking is inevitable.

<ProgressionStrip snapshots={WAVE_BREAKING_STRIP_CRITERION.snapshots} testId={WAVE_BREAKING_STRIP_CRITERION.testId} />

The visualization shows intensity jump at the 0.78 threshold - waves above this
line are in the breaking zone.

</section>

<section id="breaking-types">

## Breaking Types

Beach slope determines the type of breaker. Steeper slopes produce more dramatic
breaks, while gentle slopes create gradual foam cascades.

<ProgressionStrip snapshots={WAVE_BREAKING_STRIP_TYPES.snapshots} testId={WAVE_BREAKING_STRIP_TYPES.testId} />

**Spilling** (gentle slope, < 1:20): Foam cascades continuously down the wave
face. Common on sandy beaches. Good for beginners - forgiving and predictable.

<ProgressionPlayer snapshots={PROGRESSION_SPILLING.snapshots} />

**Plunging** (medium slope, 1:10 to 1:20): The classic barrel. Lip throws forward,
creating a hollow tube. Powerful and dramatic - the holy grail for surfers.

<ProgressionPlayer snapshots={PROGRESSION_PLUNGING.snapshots} />

**Surging** (steep slope, > 1:10): Wave surges up the beach without truly breaking.
Energy is absorbed by the steep incline. Dangerous - backwash meets incoming waves.

<ProgressionPlayer snapshots={PROGRESSION_SURGING.snapshots} />

</section>

<section id="energy-to-foam">

## Energy to Foam Conversion

When a wave breaks, kinetic energy is converted to:
1. Turbulence (mixing)
2. Sound (the crash)
3. Foam (visible whitewash)

<ProgressionPlayer snapshots={PROGRESSION_ENERGY_TO_FOAM.snapshots} />

<ProgressionStrip snapshots={WAVE_BREAKING_STRIP_ENERGY.snapshots} testId={WAVE_BREAKING_STRIP_ENERGY.testId} />

**What to look for:**
- t=0s: Full energy wave approaching
- t=2-3s: Energy drops sharply in breaking zone
- t=4-5s: Residual foam persists after wave passes

The `drainEnergyAt()` function removes energy from the wave field at the
breaking location. This drained energy is deposited into the foam layer via
the `energyTransferGrid`.

</section>

<section id="iribarren-number">

## Iribarren Number

The type of breaker can be predicted using the Iribarren number (surf similarity parameter):

```
ξ = tan(α) / sqrt(H₀/L₀)
```

Where:
- `α` = beach slope angle
- `H₀` = deep water wave height
- `L₀` = deep water wavelength

| ξ Value | Breaker Type |
|---------|--------------|
| < 0.5 | Spilling |
| 0.5 - 2.0 | Plunging |
| > 2.0 | Surging |

</section>
